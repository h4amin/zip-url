<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" 
                           integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" 
                           crossorigin="anonymous">
    <title>Zip Url</title>
    <style>
        /* Custom CSS to adjust right margin */
        .first{
            margin-right: -18px; /* Adjust the margin as needed */
        }
    </style>
</head>
<body>
<div class="container" style="width: 500px">
    <h1>zip-url</h1>
    <form action="/zipurl" method="POST" class="my-4 form-inline">
        <div class="form-group row">

            <label for="fullUrl" class="col-form-label" style="max-width: 100%"></label>
        <div class="first col-sm-10">
            <input required placeholder="url" type="url" name="fullUrl" id="fullUrl" class="form-control" style="max-width: 100%; word-wrap: break-word;">
        </div>
        <div class="col-sm-1">
            <button class="btn btn-success" type="submit">Shorten</button>
        </div>
    </div>
    </form>

    <table class="table table-striped table-responsive">
        <thead>
            <tr>
                <th> Full URL </th>
                <th> Short URL </th>
                <th> Clicks </th>
            </tr>
        </thead>
        <tbody>
            <% zipurls.forEach(zipurl => { %>
                <tr>
                    <td><a href="<%= zipurl.full %>"><%= zipurl.full %></a></td>
                    <td><a href="<%= zipurl.short %>" target="_blank"><%= zipurl.short %></a>
                        <button class="btn btn-primary" onclick="copyToClipboard('<%= zipurl.short %>')">Copy</button>
                    </td>

                    <td><%= zipurl.clicks %></td>
                </tr>

            <% }) %>
            
        </tbody>
    </table>
</div>

<script>//copy implementation
    function copyToClipboard(shortUrl) {
      const fullUrl = 'https://zip-url-4f5d2592c2d7.herokuapp.com/' + shortUrl; // Append localhost:5000/
      
      const tempInput = document.createElement('input');
      tempInput.value = fullUrl;
      document.body.appendChild(tempInput);
      tempInput.select();
      document.execCommand('copy');
      document.body.removeChild(tempInput);
    }
  </script>
  
  
</body>
</html>